# TD3ç­–ç•¥å®éªŒå¥—ä»¶è¯¦ç»†æ£€æµ‹æŠ¥å‘Š

## ä¸€ã€æ£€æµ‹æ¦‚è§ˆ

### ç›®å½•ç»“æ„
```
experiments/td3_strategy_suite/
â”œâ”€â”€ æ ¸å¿ƒè¿è¡Œè„šæœ¬ (30ä¸ª)
â”‚   â”œâ”€â”€ è®­ç»ƒä¸è¯„ä¼°: run_strategy_training.py, strategy_runner.py
â”‚   â”œâ”€â”€ æ‰¹é‡å®éªŒ: run_batch_experiments.py, run_full_suite.py
â”‚   â”œâ”€â”€ å‚æ•°æ•æ„Ÿæ€§: run_bandwidth_cost_comparison.pyç­‰14ä¸ªå¯¹æ¯”å®éªŒ
â”‚   â””â”€â”€ è¾…åŠ©æ¨¡å—: suite_cli.py, parameter_presets.pyç­‰
â”œâ”€â”€ å½’æ¡£å®éªŒ (8ä¸ªå·²åºŸå¼ƒè„šæœ¬)
â””â”€â”€ é…ç½®æ–‡æ¡£: ENVIRONMENT_VARIABLES.md
```

### æ£€æµ‹ç»´åº¦
- ä»£ç è´¨é‡ä¸è§„èŒƒæ€§
- æ¶æ„è®¾è®¡åˆç†æ€§
- åŠŸèƒ½å®Œæ•´æ€§ä¸ä¸€è‡´æ€§
- æ€§èƒ½ä¸æ•ˆç‡
- å¯ç»´æŠ¤æ€§ä¸å¯æ‰©å±•æ€§
- æ½œåœ¨é£é™©ä¸éšæ‚£

---

## äºŒã€æ ¸å¿ƒé—®é¢˜åˆ†ç±»

### ã€ä¸¥é‡é—®é¢˜ã€‘éœ€ç«‹å³ä¿®å¤

#### 1. è®­ç»ƒè½®æ¬¡éªŒè¯æœºåˆ¶ä¸ä¸€è‡´
**ä½ç½®**: `run_bandwidth_cost_comparison.py` vs å…¶ä»–è„šæœ¬

**é—®é¢˜æè¿°**:
- `run_bandwidth_cost_comparison.py` (ç¬¬415-437è¡Œ) æœ‰å®Œå–„çš„TD3è®­ç»ƒè½®æ¬¡éªŒè¯ï¼š
  - æ£€æµ‹è®­ç»ƒè½®æ¬¡ < 1500æ—¶å‘å‡ºè¯¦ç»†è­¦å‘Š
  - 15ç§’å€’è®¡æ—¶ç¡®è®¤æœºåˆ¶
  - è¾“å‡ºå»ºè®®å‘½ä»¤å’Œé¢„è®¡æ—¶é—´
- **å…¶ä»–13ä¸ªå¯¹æ¯”å®éªŒè„šæœ¬**å‡ç¼ºå°‘æ­¤éªŒè¯æœºåˆ¶

**å½±å“**:
- ç”¨æˆ·å¯èƒ½ä¸çŸ¥æƒ…åœ°ä½¿ç”¨ä¸è¶³è½®æ¬¡è¿è¡Œå®éªŒ
- TD3ç­–ç•¥æœªå……åˆ†æ”¶æ•›å¯¼è‡´æ€§èƒ½å¼‚å¸¸
- å®éªŒç»“æœå¯é æ€§ä¸‹é™

**ä¿®å¤æ–¹æ¡ˆ**:
å°†è®­ç»ƒè½®æ¬¡éªŒè¯é€»è¾‘æå–ä¸ºå…±äº«å‡½æ•°ï¼ˆå¦‚ `suite_cli.py` ä¸­çš„ `validate_td3_episodes()`ï¼‰ï¼Œåœ¨æ‰€æœ‰å®éªŒè„šæœ¬ä¸­ç»Ÿä¸€è°ƒç”¨ã€‚

---

#### 2. å¯å‘å¼ç­–ç•¥ä¼˜åŒ–å‚æ•°ä¸ä¸€è‡´
**ä½ç½®**: å¤šä¸ªå®éªŒè„šæœ¬

**é—®é¢˜æè¿°**:
- `run_bandwidth_cost_comparison.py` æ”¯æŒ `--optimize-heuristic` å‚æ•°ï¼ˆé»˜è®¤å¯ç”¨ï¼‰
  - å¯å‘å¼ç­–ç•¥ä½¿ç”¨300è½®
  - TD3ç­–ç•¥ä½¿ç”¨å®Œæ•´è½®æ¬¡ï¼ˆå¦‚1500è½®ï¼‰
  - èŠ‚çœçº¦30-40%å®éªŒæ—¶é—´
- **å…¶ä»–å®éªŒè„šæœ¬**å‡æœªå®ç°è¯¥ä¼˜åŒ–

**å½±å“**:
- å®éªŒæ—¶é—´æµªè´¹ï¼ˆå¯å‘å¼ç­–ç•¥ä¸éœ€è¦1500è½®å³å¯ç¨³å®šï¼‰
- èµ„æºåˆ©ç”¨æ•ˆç‡ä½ä¸‹
- ç”¨æˆ·ä½“éªŒä¸ä¸€è‡´

**ä¿®å¤æ–¹æ¡ˆ**:
åœ¨ `strategy_runner.py` çš„ `evaluate_configs()` å‡½æ•°ä¸­é»˜è®¤å¯ç”¨å¯å‘å¼ä¼˜åŒ–ï¼Œæ‰€æœ‰è„šæœ¬è‡ªåŠ¨å—ç›Šã€‚

---

#### 3. é»˜è®¤åœºæ™¯é…ç½®ç¡¬ç¼–ç åˆ†æ•£
**ä½ç½®**: å„å®éªŒè„šæœ¬ä¸­

**é—®é¢˜æè¿°**:
```python
# run_vehicle_count_comparison.py (ç¬¬122-127è¡Œ)
overrides = {
    "num_vehicles": count,
    "num_rsus": 4,        # ç¡¬ç¼–ç 
    "num_uavs": 2,        # ç¡¬ç¼–ç 
    "override_topology": True,
}

# run_mixed_workload_comparison.py (ç¬¬256è¡Œ)
overrides = get_default_scenario_overrides(...)  # âœ… ä½¿ç”¨ç»Ÿä¸€æ¥å£
```

**å½±å“**:
- éƒ¨åˆ†è„šæœ¬ä½¿ç”¨ `get_default_scenario_overrides()`ï¼Œéƒ¨åˆ†ç¡¬ç¼–ç 
- ä¿®æ”¹é»˜è®¤é…ç½®æ—¶éœ€è¦æ”¹å¤šå¤„
- å®¹æ˜“å‡ºç°é…ç½®ä¸ä¸€è‡´

**ä¿®å¤æ–¹æ¡ˆ**:
æ‰€æœ‰å®éªŒè„šæœ¬ç»Ÿä¸€ä½¿ç”¨ `suite_cli.get_default_scenario_overrides()`ã€‚

---

### ã€é‡è¦é—®é¢˜ã€‘å»ºè®®ä¼˜å…ˆä¿®å¤

#### 4. å¿«é€ŸéªŒè¯æ¨¡å¼ï¼ˆFast Modeï¼‰æœªæ¨å¹¿
**ä½ç½®**: ä»… `run_bandwidth_cost_comparison.py` å®ç°

**é—®é¢˜æè¿°**:
```python
# run_bandwidth_cost_comparison.py (ç¬¬519-585è¡Œ)
parser.add_argument(
    "--fast-mode",
    action="store_true",
    help="ğŸš€ å¿«é€ŸéªŒè¯æ¨¡å¼ï¼šä½¿ç”¨500è½®è®­ç»ƒï¼Œ3ä¸ªé…ç½®ç‚¹ï¼ŒèŠ‚çœ67%æ—¶é—´",
)
```

è¯¥åŠŸèƒ½å¯ä»¥:
- è®­ç»ƒè½®æ¬¡: 1500 â†’ 500
- é…ç½®æ•°é‡: 5 â†’ 3
- é¢„è®¡æ—¶é—´èŠ‚çœ: ~67%

**å½±å“**:
- ä»£ç è°ƒè¯•å’Œå¼€å‘è¿­ä»£æ—¶æ•ˆç‡ä½ä¸‹
- å…¶ä»–13ä¸ªå®éªŒè„šæœ¬æ— æ³•äº«å—è¯¥ä¾¿åˆ©

**ä¿®å¤æ–¹æ¡ˆ**:
åœ¨ `suite_cli.py` ä¸­æ·»åŠ  `--fast-mode` æ ‡å‡†å‚æ•°ï¼Œæ‰€æœ‰å®éªŒè„šæœ¬ç»Ÿä¸€æ”¯æŒã€‚

---

#### 5. ç»“æœéªŒè¯æ£€æŸ¥ï¼ˆResult Validationï¼‰ç¼ºå¤±
**ä½ç½®**: ä»… `run_bandwidth_cost_comparison.py` å®ç°

**é—®é¢˜æè¿°**:
`run_bandwidth_cost_comparison.py` (ç¬¬682-780è¡Œ) åŒ…å«ç»“æœéªŒè¯é€»è¾‘:
```python
# éªŒè¯1: local-only ç­–ç•¥æ€§èƒ½ä¸€è‡´æ€§
# éªŒè¯2: comprehensive-migration æ€§èƒ½éšèµ„æºå¢åŠ è€Œæå‡
# éªŒè¯3: é«˜èµ„æºé…ç½®ä¸‹ä»»åŠ¡å®Œæˆç‡æ£€æŸ¥
```

**å½±å“**:
- å…¶ä»–å®éªŒæ— æ³•è‡ªåŠ¨æ£€æµ‹å¼‚å¸¸ç»“æœ
- ä¾èµ–äººå·¥æ£€æŸ¥ï¼Œå®¹æ˜“é—æ¼é—®é¢˜

**ä¿®å¤æ–¹æ¡ˆ**:
æå–éªŒè¯é€»è¾‘åˆ° `validation_utils.py`ï¼Œä¾›æ‰€æœ‰å®éªŒå¤ç”¨ã€‚

---

#### 6. é…ç½®ä¸€è‡´æ€§æ£€æŸ¥é€»è¾‘ä¸ç»Ÿä¸€
**ä½ç½®**: `run_bandwidth_cost_comparison.py` (ç¬¬606-615è¡Œ)

**é—®é¢˜æè¿°**:
```python
# æ£€æŸ¥ç³»ç»Ÿé»˜è®¤RSUè®¡ç®—èµ„æºä¸å®éªŒé…ç½®æ˜¯å¦ä¸€è‡´
config_rsu_compute_ghz = float(getattr(sys_config.compute, 'total_rsu_compute', 50e9)) / 1e9
middle_rsu_level = sorted(rsu_levels)[len(rsu_levels)//2]

if abs(config_rsu_compute_ghz - middle_rsu_level) > 5.0:
    print(f"\nâš ï¸  [è­¦å‘Š] é…ç½®ä¸ä¸€è‡´...")
```

è¯¥æ£€æŸ¥ä»…åœ¨RSUè®¡ç®—èµ„æºå®éªŒä¸­å­˜åœ¨ï¼Œå…¶ä»–å®éªŒï¼ˆå¦‚UAVèµ„æºã€å¸¦å®½ï¼‰æ— ç±»ä¼¼æ£€æŸ¥ã€‚

**å½±å“**:
- è®­ç»ƒé…ç½®ä¸è¯„ä¼°é…ç½®ä¸ä¸€è‡´æ—¶æ— æ³•åŠæ—¶å‘ç°
- æ³›åŒ–æ€§èƒ½å¯èƒ½å—å½±å“

**ä¿®å¤æ–¹æ¡ˆ**:
ä¸ºæ‰€æœ‰èµ„æºå‚æ•°å®éªŒæ·»åŠ é…ç½®ä¸€è‡´æ€§æ£€æŸ¥ã€‚

---

#### 7. æŒ‡æ ‡å¢å¼ºé’©å­ï¼ˆMetrics Enrichment Hookï¼‰æœªæ¨å¹¿
**ä½ç½®**: `run_bandwidth_cost_comparison.py` (ç¬¬135-206è¡Œ)

**é—®é¢˜æè¿°**:
è¯¥è„šæœ¬å®ç°äº†å®Œå–„çš„æŒ‡æ ‡å¢å¼ºé€»è¾‘:
```python
def metrics_enrichment_hook(...):
    # ğŸ¯ ä¼˜åŒ–1: ååé‡è®¡ç®—
    # ğŸ¯ ä¼˜åŒ–2: RSUåˆ©ç”¨ç‡æŒ‡æ ‡
    # ğŸ¯ ä¼˜åŒ–3: å¸è½½ç‡æŒ‡æ ‡
    # ğŸ¯ ä¼˜åŒ–4: é˜Ÿåˆ—é•¿åº¦æŒ‡æ ‡
    # ğŸ¯ ä¼˜åŒ–5: æ€§èƒ½ç¨³å®šæ€§æŒ‡æ ‡
    # ğŸ¯ ä¼˜åŒ–6: èµ„æºåˆ©ç”¨æ•ˆç‡
```

ä½†å…¶ä»–å®éªŒè„šæœ¬æœªä½¿ç”¨æ­¤é’©å­å‡½æ•°ï¼Œä»…è®¡ç®—åŸºç¡€æŒ‡æ ‡ã€‚

**å½±å“**:
- å®éªŒç»“æœæ·±åº¦ä¸ä¸€è‡´
- éƒ¨åˆ†å…³é”®æŒ‡æ ‡ï¼ˆå¦‚èµ„æºåˆ©ç”¨ç‡ã€ç¨³å®šæ€§ï¼‰ç¼ºå¤±
- å­¦æœ¯ä»·å€¼é™ä½

**ä¿®å¤æ–¹æ¡ˆ**:
å°†æŒ‡æ ‡å¢å¼ºé€»è¾‘ä½œä¸ºé»˜è®¤è¡Œä¸ºé›†æˆåˆ° `strategy_runner.py`ã€‚

---

#### 8. å®éªŒå…ƒæ•°æ®ä¸å®Œæ•´
**ä½ç½®**: å¤šä¸ªå®éªŒè„šæœ¬

**é—®é¢˜æè¿°**:
```python
# run_vehicle_count_comparison.py çš„summaryä»…åŒ…å«:
summary = {
    "experiment_type": "vehicle_count_sensitivity",
    "suite_id": common.suite_id,
    "created_at": datetime.now().isoformat(),
    "num_configs": len(results),
    "episodes_per_config": common.episodes,
    "seed": common.seed,
    "strategy_keys": strategy_keys,
    "results": results,
}
```

ç¼ºå¤±:
- å®éªŒè„šæœ¬ç‰ˆæœ¬/commit hash
- ç³»ç»Ÿé…ç½®å¿«ç…§ï¼ˆå¦‚è½¦è¾†æ•°ã€RSUæ•°ç­‰åŸºå‡†é…ç½®ï¼‰
- è¿è¡Œç¯å¢ƒä¿¡æ¯ï¼ˆPythonç‰ˆæœ¬ã€ä¾èµ–ç‰ˆæœ¬ï¼‰
- å®éªŒæŒç»­æ—¶é—´

**å½±å“**:
- ç»“æœå¯é‡å¤æ€§é™ä½
- éš¾ä»¥è¿½æº¯å†å²å®éªŒçš„ç¡®åˆ‡æ¡ä»¶

**ä¿®å¤æ–¹æ¡ˆ**:
åœ¨ `suite_cli.py` ä¸­æä¾› `generate_experiment_metadata()` å‡½æ•°ï¼Œè‡ªåŠ¨æ”¶é›†å®Œæ•´å…ƒæ•°æ®ã€‚

---

### ã€ä¸€èˆ¬é—®é¢˜ã€‘å¯å»¶åå¤„ç†

#### 9. ç­–ç•¥æ¨¡å‹ç¼“å­˜ç³»ç»Ÿï¼ˆStrategy Model Cacheï¼‰æœªå¯ç”¨
**ä½ç½®**: `strategy_model_cache.py`

**é—®é¢˜æè¿°**:
```python
# strategy_runner.py (ç¬¬29-30è¡Œ)
# ç¼“å­˜ç³»ç»Ÿå·²ç¦ç”¨
# from experiments.td3_strategy_suite.strategy_model_cache import get_global_cache
```

è¯¥æ¨¡å—å®ç°äº†å®Œæ•´çš„æ¨¡å‹ç¼“å­˜æœºåˆ¶:
- è‡ªåŠ¨æ£€æµ‹å·²è®­ç»ƒæ¨¡å‹
- é¿å…é‡å¤è®­ç»ƒ
- èŠ‚çœå®éªŒæ—¶é—´

ä½†ç›®å‰è¢«æ³¨é‡Šç¦ç”¨ã€‚

**å½±å“**:
- é‡å¤è¿è¡Œç›¸åŒé…ç½®æ—¶æµªè´¹å¤§é‡æ—¶é—´
- æ— æ³•åˆ©ç”¨å†å²è®­ç»ƒç»“æœ

**å»ºè®®**:
è¯„ä¼°ç¼“å­˜ç³»ç»Ÿç¨³å®šæ€§åé‡æ–°å¯ç”¨ï¼Œæˆ–æä¾› `--use-cache` å‚æ•°è®©ç”¨æˆ·é€‰æ‹©ã€‚

---

#### 10. æ‰¹é‡å®éªŒè„šæœ¬ï¼ˆrun_batch_experiments.pyï¼‰å…ƒæ•°æ®è¿‡æ—¶
**ä½ç½®**: `run_batch_experiments.py` (ç¬¬56-187è¡Œ)

**é—®é¢˜æè¿°**:
å®éªŒé…ç½®å­—å…¸æ ‡æ³¨ä¸º"å·²æ•´åˆ18ä¸ªâ†’14ä¸ªå®éªŒ"ï¼Œä½†æ³¨é‡Šæ˜¾ç¤º:
- åˆå¹¶çš„å®éªŒä¿¡æ¯ä¸å®Œæ•´
- éƒ¨åˆ†æ–°å¢å®éªŒæœªæ ‡è®°"NEW"æ ‡ç­¾
- ä¼˜å…ˆçº§åˆ†ç±»å¯èƒ½ä¸å®é™…ä¸ç¬¦

**å½±å“**:
- ç”¨æˆ·å¯èƒ½æ ¹æ®è¿‡æ—¶ä¿¡æ¯é€‰æ‹©å®éªŒ
- æ‰¹é‡è¿è¡Œæ—¶é€‰æ‹©é”™è¯¯çš„å®éªŒç»„åˆ

**ä¿®å¤æ–¹æ¡ˆ**:
æ›´æ–° `EXPERIMENTS` å­—å…¸ï¼Œç¡®ä¿æ‰€æœ‰å…ƒæ•°æ®å‡†ç¡®ã€‚

---

#### 11. é¢œè‰²è¾“å‡ºæ¨¡å—ï¼ˆcoloramaï¼‰ä¸ºå¯é€‰ä¾èµ–
**ä½ç½®**: `run_batch_experiments.py` (ç¬¬197-208è¡Œ)

**é—®é¢˜æè¿°**:
```python
try:
    from colorama import init, Fore, Style
    init(autoreset=True)
    USE_COLOR = True
except ImportError:
    USE_COLOR = False
    class Fore: ...  # å ä½ç±»
```

è™½ç„¶æä¾›äº†é™çº§æ–¹æ¡ˆï¼Œä½†æœªåœ¨ `requirements.txt` ä¸­æ˜ç¡®æ ‡è®°ä¸ºå¯é€‰ä¾èµ–ã€‚

**å½±å“**:
- ç”¨æˆ·å¯èƒ½å›°æƒ‘ä¸ºä½•é¢œè‰²è¾“å‡ºä¸ç”Ÿæ•ˆ
- å¼€å‘ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒè¡Œä¸ºä¸ä¸€è‡´

**ä¿®å¤æ–¹æ¡ˆ**:
åœ¨ `requirements.txt` ä¸­æ·»åŠ :
```
colorama>=0.4.6  # å¯é€‰ï¼šç»ˆç«¯å½©è‰²è¾“å‡ºæ”¯æŒ
```

---

#### 12. é»˜è®¤è®­ç»ƒè½®æ¬¡åœ¨ä¸åŒè„šæœ¬ä¸­ä¸ä¸€è‡´
**ä½ç½®**: å¤šä¸ªè„šæœ¬

**é—®é¢˜ç»Ÿè®¡**:
- `run_strategy_training.py`: `DEFAULT_EPISODES = 1500`
- `run_bandwidth_cost_comparison.py`: `DEFAULT_EPISODES = 1500`
- `run_vehicle_count_comparison.py`: `DEFAULT_EPISODES = 500`
- `run_mixed_workload_comparison.py`: `DEFAULT_EPISODES = 500`

**å½±å“**:
- ç”¨æˆ·éš¾ä»¥ç†è§£ä¸ºä½•ä¸åŒå®éªŒé»˜è®¤è½®æ¬¡ä¸åŒ
- å¯èƒ½å¯¼è‡´éƒ¨åˆ†å®éªŒç»“æœä¸å¯é 

**å»ºè®®**:
ç»Ÿä¸€é»˜è®¤è½®æ¬¡ä¸º1500ï¼Œæˆ–åœ¨è„šæœ¬å¼€å¤´æ˜ç¡®è¯´æ˜ä¸ºä½•ä½¿ç”¨ä¸åŒé»˜è®¤å€¼ã€‚

---

## ä¸‰ã€æ¶æ„ä¸è®¾è®¡é—®é¢˜

### 1. æ¨¡å—èŒè´£åˆ’åˆ†åˆç†æ€§

**å½“å‰æ¶æ„**:
```
strategy_runner.py        # æ ¸å¿ƒæ‰§è¡Œå¼•æ“
â”œâ”€â”€ run_strategy_suite()  # è¿è¡Œç­–ç•¥å¥—ä»¶
â””â”€â”€ evaluate_configs()    # è¯„ä¼°å¤šä¸ªé…ç½®

suite_cli.py              # CLIå‚æ•°è§£æä¸å…±äº«å·¥å…·
â”œâ”€â”€ add_common_experiment_args()
â””â”€â”€ resolve_common_args()

run_*_comparison.py       # å„å‚æ•°æ•æ„Ÿæ€§å®éªŒï¼ˆ14ä¸ªï¼‰
â””â”€â”€ main()                # ç‹¬ç«‹å…¥å£
```

**é—®é¢˜**:
- å„å®éªŒè„šæœ¬ç‹¬ç«‹å®ç°æŒ‡æ ‡è®¡ç®—ã€å›¾è¡¨ç»˜åˆ¶ï¼Œä»£ç é‡å¤åº¦é«˜
- å…±äº«é€»è¾‘æ•£è½åœ¨å¤šå¤„ï¼ˆå¦‚è®­ç»ƒè½®æ¬¡éªŒè¯ã€é…ç½®æ£€æŸ¥ï¼‰

**å»ºè®®é‡æ„æ–¹å‘**:
```
experiments/td3_strategy_suite/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ runner.py              # æ‰§è¡Œå¼•æ“
â”‚   â”œâ”€â”€ validator.py           # å‚æ•°éªŒè¯ä¸ç»“æœéªŒè¯
â”‚   â””â”€â”€ metrics.py             # æŒ‡æ ‡è®¡ç®—ä¸å¢å¼º
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ cli.py                 # CLIå·¥å…·
â”‚   â”œâ”€â”€ visualization.py       # å›¾è¡¨ç”Ÿæˆ
â”‚   â””â”€â”€ reporting.py           # æŠ¥å‘Šç”Ÿæˆ
â””â”€â”€ experiments/
    â”œâ”€â”€ bandwidth_sensitivity.py
    â””â”€â”€ ...
```

---

### 2. é…ç½®ç®¡ç†é—®é¢˜

**å½“å‰é—®é¢˜**:
- é»˜è®¤é…ç½®åˆ†æ•£åœ¨å¤šä¸ªæ–‡ä»¶ä¸­
  - `suite_cli.DEFAULT_SCENARIO_CONFIG`
  - `parameter_presets.default_*_levels()`
  - å„å®éªŒè„šæœ¬çš„ `DEFAULT_*` å¸¸é‡
- ç¼ºå°‘é…ç½®éªŒè¯æœºåˆ¶
- ç¼ºå°‘é…ç½®ç‰ˆæœ¬ç®¡ç†

**å»ºè®®**:
å¼•å…¥ç»Ÿä¸€é…ç½®ç®¡ç†å™¨:
```python
# config_manager.py
class ExperimentConfig:
    def __init__(self):
        self.scenario = ScenarioConfig()
        self.training = TrainingConfig()
        self.validation = ValidationConfig()
    
    def validate(self):
        # å‚æ•°èŒƒå›´æ£€æŸ¥
        # ä¾èµ–å…³ç³»æ£€æŸ¥
        # ä¸€è‡´æ€§æ£€æŸ¥
```

---

### 3. é”™è¯¯å¤„ç†ä¸ç»Ÿä¸€

**é—®é¢˜ç¤ºä¾‹**:

```python
# comparison_suite.py (ç¬¬177-200è¡Œ) - å®Œå–„çš„å¼‚å¸¸å¤„ç†
try:
    result = self.train_fn(...)
except ValueError as exc:
    return {"success": False, "error": str(exc), "error_type": "ValueError"}
except RuntimeError as exc:
    return {"success": False, "error": str(exc), "error_type": "RuntimeError"}
except Exception as exc:
    return {"success": False, "error": str(exc), "error_type": type(exc).__name__}

# run_vehicle_count_comparison.py - ç¼ºå°‘å¼‚å¸¸å¤„ç†
results = evaluate_configs(...)  # æœªæ•è·å¼‚å¸¸
```

**å½±å“**:
- å®éªŒä¸­é€”å¤±è´¥æ—¶æ— æ³•ä¼˜é›…é™çº§
- éƒ¨åˆ†ç»“æœä¸¢å¤±

**å»ºè®®**:
åœ¨ `evaluate_configs()` ä¸­æ·»åŠ é…ç½®çº§åˆ«çš„é”™è¯¯æ•è·ã€‚

---

## å››ã€æ€§èƒ½ä¸æ•ˆç‡é—®é¢˜

### 1. ä¸²è¡Œæ‰§è¡Œæ•ˆç‡ä½

**å½“å‰å®ç°**:
```python
# strategy_runner.py evaluate_configs()
for index, cfg in enumerate(configs):
    for strat_key in strategy_keys:
        # ä¸²è¡Œè®­ç»ƒæ¯ä¸ªç­–ç•¥
```

14ä¸ªå®éªŒ Ã— 5ä¸ªé…ç½® Ã— 6ä¸ªç­–ç•¥ = 420æ¬¡è®­ç»ƒï¼ˆå¦‚æœå…¨éƒ¨è¿è¡Œï¼‰

**å»ºè®®**:
- ä¸ºç‹¬ç«‹å®éªŒæä¾›å¹¶è¡Œæ‰§è¡Œé€‰é¡¹
- åˆ©ç”¨å¤šGPUç¯å¢ƒåŒæ—¶è®­ç»ƒå¤šä¸ªç­–ç•¥

---

### 2. é‡å¤è®­ç»ƒæµªè´¹

**é—®é¢˜**:
- ç›¸åŒé…ç½®åœ¨ä¸åŒå®éªŒä¸­é‡å¤è®­ç»ƒ
  - ä¾‹å¦‚: `num_vehicles=12, num_rsus=4, bandwidth=50MHz` å¯èƒ½åœ¨å¤šä¸ªå®éªŒä¸­å‡ºç°
- æ¨¡å‹ç¼“å­˜ç³»ç»Ÿè¢«ç¦ç”¨ï¼Œæ— æ³•åˆ©ç”¨å†å²ç»“æœ

**é¢„ä¼°æµªè´¹**:
- çº¦30-40%çš„è®­ç»ƒæ—¶é—´ç”¨äºé‡å¤è®­ç»ƒ

**å»ºè®®**:
é‡æ–°å¯ç”¨æ¨¡å‹ç¼“å­˜ç³»ç»Ÿï¼Œæˆ–å®ç°å®éªŒé—´ç»“æœå…±äº«æœºåˆ¶ã€‚

---

## äº”ã€å¯ç»´æŠ¤æ€§é—®é¢˜

### 1. æ–‡æ¡£ä¸ä»£ç ä¸åŒæ­¥

**é—®é¢˜**:
- `ENVIRONMENT_VARIABLES.md` æ–‡æ¡£å®Œå–„ï¼Œä½†éƒ¨åˆ†ç¯å¢ƒå˜é‡åœ¨ä»£ç ä¸­å·²åºŸå¼ƒ
- å½’æ¡£å®éªŒç›®å½•ï¼ˆ`archived_experiments/`ï¼‰ç¼ºå°‘è¿ç§»æŒ‡å—

**å»ºè®®**:
- å®šæœŸæ£€æŸ¥æ–‡æ¡£ä¸ä»£ç ä¸€è‡´æ€§
- å½’æ¡£å®éªŒæ·»åŠ "è¿ç§»åˆ°æ–°å®éªŒ"çš„å¯¹åº”å…³ç³»

---

### 2. æµ‹è¯•è¦†ç›–ä¸è¶³

**å½“å‰çŠ¶æ€**:
- æ— å•å…ƒæµ‹è¯•
- æ— é›†æˆæµ‹è¯•
- ä¾èµ–äººå·¥éªŒè¯

**é£é™©**:
- é‡æ„æ—¶å®¹æ˜“å¼•å…¥å›å½’é—®é¢˜
- å‚æ•°éªŒè¯é€»è¾‘æ— æ³•è‡ªåŠ¨æµ‹è¯•

**å»ºè®®**:
ä¸ºæ ¸å¿ƒæ¨¡å—æ·»åŠ æµ‹è¯•:
```python
tests/td3_strategy_suite/
â”œâ”€â”€ test_runner.py
â”œâ”€â”€ test_validator.py
â””â”€â”€ test_metrics.py
```

---

### 3. ä»£ç é£æ ¼ä¸ç»Ÿä¸€

**é—®é¢˜ç¤ºä¾‹**:
```python
# éƒ¨åˆ†è„šæœ¬ä½¿ç”¨ç±»å‹æ³¨è§£
def tail_mean(values: Iterable[float]) -> float:

# éƒ¨åˆ†è„šæœ¬æœªä½¿ç”¨
def tail_mean(values):
```

**å»ºè®®**:
- ç»Ÿä¸€ä½¿ç”¨ç±»å‹æ³¨è§£ï¼ˆå·²åœ¨ `from __future__ import annotations` å¯ç”¨ï¼‰
- é…ç½® `mypy` è¿›è¡Œé™æ€ç±»å‹æ£€æŸ¥

---

## å…­ã€å®‰å…¨ä¸é²æ£’æ€§é—®é¢˜

### 1. ç”¨æˆ·è¾“å…¥éªŒè¯ä¸å®Œæ•´

**é—®é¢˜ç¤ºä¾‹**:
```python
# run_vehicle_count_comparison.py (ç¬¬51-54è¡Œ)
def parse_vehicle_counts(value: str) -> List[int]:
    if not value or value.strip().lower() == "default":
        return list(DEFAULT_VEHICLE_COUNTS)
    return [int(item.strip()) for item in value.split(",") if item.strip()]
    # âš ï¸ æœªéªŒè¯è½¦è¾†æ•°æ˜¯å¦åœ¨åˆç†èŒƒå›´ï¼ˆå¦‚ > 0ï¼‰
```

**é£é™©**:
- è´Ÿæ•°æˆ–é›¶å€¼å¯èƒ½å¯¼è‡´è¿è¡Œæ—¶é”™è¯¯
- è¿‡å¤§å€¼å¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡º

**å»ºè®®**:
```python
def parse_vehicle_counts(value: str) -> List[int]:
    ...
    counts = [int(item.strip()) for item in value.split(",") if item.strip()]
    for count in counts:
        if count <= 0:
            raise ValueError(f"è½¦è¾†æ•°å¿…é¡»ä¸ºæ­£æ•°ï¼Œå¾—åˆ°: {count}")
        if count > 100:  # åˆç†ä¸Šé™
            raise ValueError(f"è½¦è¾†æ•°è¿‡å¤§: {count}ï¼Œæœ€å¤§æ”¯æŒ100")
    return counts
```

---

### 2. æ–‡ä»¶è·¯å¾„ç¡¬ç¼–ç é£é™©

**é—®é¢˜ç¤ºä¾‹**:
```python
# strategy_model_cache.py (ç¬¬59è¡Œ)
DEFAULT_CACHE_DIR = Path("results/strategy_model_cache")
```

**é£é™©**:
- Windows/Linuxè·¯å¾„åˆ†éš”ç¬¦ä¸ä¸€è‡´
- å·¥ä½œç›®å½•å˜åŒ–æ—¶è·¯å¾„å¤±æ•ˆ

**å»ºè®®**:
ä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•çš„ç›¸å¯¹è·¯å¾„:
```python
DEFAULT_CACHE_DIR = project_root / "results" / "strategy_model_cache"
```

---

## ä¸ƒã€å…·ä½“ä¼˜åŒ–å»ºè®®

### çŸ­æœŸä¼˜åŒ–ï¼ˆ1-2å‘¨ï¼‰

#### ä¼˜å…ˆçº§1: ç»Ÿä¸€è®­ç»ƒè½®æ¬¡éªŒè¯
**å·¥ä½œé‡**: 4å°æ—¶
**æ­¥éª¤**:
1. åœ¨ `suite_cli.py` ä¸­æ·»åŠ :
   ```python
   def validate_td3_episodes(episodes: int, strategies: List[str]) -> None:
       td3_strategies = ['comprehensive-no-migration', 'comprehensive-migration']
       if any(s in td3_strategies for s in strategies):
           if episodes < 1500:
               print("âš ï¸  è­¦å‘Š: TD3è®­ç»ƒè½®æ¬¡ä¸è¶³...")
               # å€’è®¡æ—¶ç¡®è®¤é€»è¾‘
   ```
2. åœ¨æ‰€æœ‰å®éªŒè„šæœ¬çš„ `main()` ä¸­è°ƒç”¨è¯¥å‡½æ•°

---

#### ä¼˜å…ˆçº§2: æ¨å¹¿å¯å‘å¼ä¼˜åŒ–å‚æ•°
**å·¥ä½œé‡**: 2å°æ—¶
**æ­¥éª¤**:
1. åœ¨ `add_common_experiment_args()` ä¸­æ·»åŠ  `--optimize-heuristic` å‚æ•°
2. åœ¨ `evaluate_configs()` ä¸­é»˜è®¤å¯ç”¨å¯å‘å¼ä¼˜åŒ–

---

#### ä¼˜å…ˆçº§3: ç»Ÿä¸€é»˜è®¤åœºæ™¯é…ç½®
**å·¥ä½œé‡**: 3å°æ—¶
**æ­¥éª¤**:
1. æ£€æŸ¥æ‰€æœ‰å®éªŒè„šæœ¬ï¼Œæ›¿æ¢ç¡¬ç¼–ç é…ç½®ä¸º `get_default_scenario_overrides()`
2. éªŒè¯é…ç½®ä¸€è‡´æ€§

---

### ä¸­æœŸä¼˜åŒ–ï¼ˆ2-4å‘¨ï¼‰

#### ä¼˜å…ˆçº§4: æå–å…±äº«æŒ‡æ ‡è®¡ç®—é€»è¾‘
**å·¥ä½œé‡**: 1å‘¨
**æ­¥éª¤**:
1. åˆ›å»º `metrics_calculator.py`
2. å°†æŒ‡æ ‡å¢å¼ºé€»è¾‘æ ‡å‡†åŒ–
3. æ‰€æœ‰å®éªŒè„šæœ¬ç»Ÿä¸€ä½¿ç”¨

---

#### ä¼˜å…ˆçº§5: é‡æ„å¯è§†åŒ–æ¨¡å—
**å·¥ä½œé‡**: 1å‘¨
**æ­¥éª¤**:
1. æ•´åˆ `visualization_utils.py` ä¸å„è„šæœ¬çš„ç»˜å›¾é€»è¾‘
2. æä¾›æ ‡å‡†åŒ–å›¾è¡¨æ¨¡æ¿
3. æ”¯æŒä¸»é¢˜é…ç½®ï¼ˆè®ºæ–‡é£æ ¼ã€æ¼”ç¤ºé£æ ¼ï¼‰

---

### é•¿æœŸä¼˜åŒ–ï¼ˆ1-2æœˆï¼‰

#### ä¼˜å…ˆçº§6: æ¶æ„é‡æ„
**å·¥ä½œé‡**: 2å‘¨
**æ­¥éª¤**:
1. æŒ‰ç…§ç¬¬ä¸‰èŠ‚å»ºè®®è°ƒæ•´ç›®å½•ç»“æ„
2. å¼•å…¥é…ç½®ç®¡ç†å™¨
3. æ·»åŠ å•å…ƒæµ‹è¯•

---

#### ä¼˜å…ˆçº§7: å¹¶è¡ŒåŒ–æ”¯æŒ
**å·¥ä½œé‡**: 1å‘¨
**æ­¥éª¤**:
1. å®ç°åŸºäºè¿›ç¨‹æ± çš„å¹¶è¡Œè®­ç»ƒ
2. GPUèµ„æºåˆ†é…ç®¡ç†
3. è¿›åº¦ç›‘æ§ä¸ç»“æœèšåˆ

---

## å…«ã€å…³é”®æŒ‡æ ‡

### ä»£ç è´¨é‡è¯„åˆ†

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| åŠŸèƒ½å®Œæ•´æ€§ | 8/10 | æ ¸å¿ƒåŠŸèƒ½é½å…¨ï¼Œä½†éƒ¨åˆ†é«˜çº§ç‰¹æ€§æœªæ¨å¹¿ |
| ä»£ç è§„èŒƒæ€§ | 7/10 | å¤§éƒ¨åˆ†éµå¾ªè§„èŒƒï¼Œç±»å‹æ³¨è§£ä¸ç»Ÿä¸€ |
| æ¶æ„åˆç†æ€§ | 7/10 | æ¨¡å—åŒ–è‰¯å¥½ï¼Œä½†èŒè´£åˆ’åˆ†å¯ä¼˜åŒ– |
| é”™è¯¯å¤„ç† | 6/10 | éƒ¨åˆ†æ¨¡å—å¤„ç†å®Œå–„ï¼Œæ•´ä½“ä¸ç»Ÿä¸€ |
| å¯ç»´æŠ¤æ€§ | 6/10 | ä»£ç é‡å¤è¾ƒå¤šï¼Œç¼ºå°‘æµ‹è¯• |
| æ€§èƒ½æ•ˆç‡ | 5/10 | ä¸²è¡Œæ‰§è¡Œï¼Œå­˜åœ¨é‡å¤è®­ç»ƒ |
| æ–‡æ¡£è´¨é‡ | 8/10 | æ³¨é‡Šè¯¦ç»†ï¼Œä½†éƒ¨åˆ†è¿‡æ—¶ |

**ç»¼åˆè¯„åˆ†**: 6.7/10

---

### æŠ€æœ¯å€ºåŠ¡ä¼°ç®—

| é—®é¢˜ç±»å‹ | ä¼°ç®—ä¿®å¤æ—¶é—´ | ä¼˜å…ˆçº§ |
|----------|-------------|--------|
| ä¸¥é‡é—®é¢˜ï¼ˆ3ä¸ªï¼‰ | 12å°æ—¶ | é«˜ |
| é‡è¦é—®é¢˜ï¼ˆ6ä¸ªï¼‰ | 3å‘¨ | ä¸­ |
| ä¸€èˆ¬é—®é¢˜ï¼ˆ3ä¸ªï¼‰ | 1å‘¨ | ä½ |
| æ¶æ„ä¼˜åŒ– | 1-2æœˆ | ä¸­ |

**æ€»è®¡**: çº¦2-3ä¸ªæœˆå·¥ä½œé‡ï¼ˆ1äººå…¨èŒï¼‰

---

## ä¹ã€æ¨èè¡ŒåŠ¨è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼ˆæœ¬å‘¨ï¼‰
1. âœ… ç»Ÿä¸€è®­ç»ƒè½®æ¬¡éªŒè¯
2. âœ… æ¨å¹¿å¯å‘å¼ä¼˜åŒ–
3. âœ… ä¿®å¤é»˜è®¤é…ç½®ç¡¬ç¼–ç 

**é¢„æœŸæ”¶ç›Š**: 
- å®éªŒå¯é æ€§æå‡20%
- å®éªŒæ—¶é—´èŠ‚çœ30%

---

### ç¬¬äºŒé˜¶æ®µï¼ˆæœ¬æœˆï¼‰
4. âœ… æå–æŒ‡æ ‡è®¡ç®—é€»è¾‘
5. âœ… å®Œå–„ç»“æœéªŒè¯æœºåˆ¶
6. âœ… æ›´æ–°å®éªŒå…ƒæ•°æ®

**é¢„æœŸæ”¶ç›Š**:
- ä»£ç é‡å¤åº¦é™ä½40%
- ç»“æœå¯è¿½æº¯æ€§æå‡

---

### ç¬¬ä¸‰é˜¶æ®µï¼ˆä¸‹æœˆï¼‰
7. âœ… æ¶æ„é‡æ„
8. âœ… æ·»åŠ å•å…ƒæµ‹è¯•
9. âœ… å®ç°å¹¶è¡Œæ‰§è¡Œ

**é¢„æœŸæ”¶ç›Š**:
- å¯ç»´æŠ¤æ€§æ˜¾è‘—æå‡
- å¼€å‘æ•ˆç‡æå‡50%

---

## åã€ç»“è®º

### æ•´ä½“è¯„ä»·
`experiments/td3_strategy_suite` ç›®å½•å®ç°äº†å®Œæ•´çš„TD3ç­–ç•¥å¯¹æ¯”å®éªŒæ¡†æ¶ï¼Œæ ¸å¿ƒåŠŸèƒ½å®Œå–„ï¼Œä½†å­˜åœ¨ä»¥ä¸‹é—®é¢˜:

**ä¼˜ç‚¹**:
- å®éªŒè®¾è®¡ç§‘å­¦ï¼Œè¦†ç›–å¤šä¸ªå‚æ•°ç»´åº¦
- éƒ¨åˆ†è„šæœ¬å®ç°äº†å…ˆè¿›çš„éªŒè¯ä¸ä¼˜åŒ–æœºåˆ¶
- æ–‡æ¡£ä¸æ³¨é‡Šè¾ƒä¸ºè¯¦ç»†

**ä¸è¶³**:
- ä¼˜ç§€ç‰¹æ€§æœªåœ¨æ‰€æœ‰è„šæœ¬ä¸­æ¨å¹¿ï¼Œå¯¼è‡´åŠŸèƒ½ä¸ä¸€è‡´
- ä»£ç é‡å¤åº¦è¾ƒé«˜ï¼Œç¼ºå°‘ç»Ÿä¸€æŠ½è±¡
- æ€§èƒ½ä¼˜åŒ–ç©ºé—´å¤§ï¼ˆä¸²è¡Œæ‰§è¡Œã€é‡å¤è®­ç»ƒï¼‰
- ç¼ºå°‘è‡ªåŠ¨åŒ–æµ‹è¯•

### ä¿®å¤ä¼˜å…ˆçº§
1. **ç«‹å³ä¿®å¤**: è®­ç»ƒè½®æ¬¡éªŒè¯ã€å¯å‘å¼ä¼˜åŒ–ã€é…ç½®ç¡¬ç¼–ç 
2. **æœ¬æœˆä¿®å¤**: æŒ‡æ ‡è®¡ç®—ã€ç»“æœéªŒè¯ã€å…ƒæ•°æ®å®Œæ•´æ€§
3. **è®¡åˆ’é‡æ„**: æ¶æ„ä¼˜åŒ–ã€å¹¶è¡ŒåŒ–ã€æµ‹è¯•è¦†ç›–

### ä¿¡å¿ƒè¯„ä¼°
- **æ£€æµ‹å®Œæ•´æ€§**: Highï¼ˆå·²è¦†ç›–æ‰€æœ‰æ ¸å¿ƒæ–‡ä»¶ä¸30ä¸ªè„šæœ¬ï¼‰
- **é—®é¢˜å‡†ç¡®æ€§**: Highï¼ˆåŸºäºä»£ç å¯¹æ¯”å’Œæœ€ä½³å®è·µåˆ†æï¼‰
- **ä¿®å¤å¯è¡Œæ€§**: Mediumï¼ˆéœ€è¦2-3ä¸ªæœˆå·¥ä½œé‡ï¼Œä½†æŠ€æœ¯è·¯çº¿æ˜ç¡®ï¼‰

**å…³é”®å› ç´ **:
- é—®é¢˜ä¸»è¦ä¸ºåŠŸèƒ½ä¸ä¸€è‡´å’Œä»£ç é‡å¤ï¼Œéè®¾è®¡ç¼ºé™·
- ä¿®å¤æ–¹æ¡ˆæ¸…æ™°ï¼Œé£é™©å¯æ§
- å»ºè®®åˆ†é˜¶æ®µå®æ–½ï¼Œé¿å…å¤§è§„æ¨¡é‡æ„å¸¦æ¥çš„ç¨³å®šæ€§é£é™©
