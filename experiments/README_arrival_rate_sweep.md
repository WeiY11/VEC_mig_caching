# TD3ä»»åŠ¡åˆ°è¾¾ç‡æ•æ„Ÿæ€§åˆ†æå®éªŒ

## ğŸ“‹ å®éªŒè¯´æ˜

è¯¥è„šæœ¬ç”¨äºæµ‹è¯•ä¸åŒä»»åŠ¡åˆ°è¾¾ç‡(arrival_rate)å¯¹TD3ç®—æ³•æ€§èƒ½çš„å½±å“ï¼Œæ˜¯å‚æ•°æ•æ„Ÿæ€§åˆ†æçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚

### ğŸ¯ å®éªŒç›®æ ‡

- **æ ¸å¿ƒæŒ‡æ ‡**: å¹³å‡æ­¥å¥–åŠ± (ave_reward_per_step)
- **ä¼˜åŒ–ç›®æ ‡**: æ—¶å»¶ + èƒ½è€—
- **æµ‹è¯•å‚æ•°**: ä»»åŠ¡åˆ°è¾¾ç‡ (1.0 - 3.5 tasks/s)

### ğŸ“Š å½“å‰é…ç½®

```
é»˜è®¤ä»»åŠ¡åˆ°è¾¾ç‡: 2.5 tasks/s (12è½¦è¾†é«˜è´Ÿè½½åœºæ™¯)
è½¦è¾†æ•°: 12è¾†
ç®—æ³•: TD3
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¿«é€Ÿæµ‹è¯•ï¼ˆçº¦10åˆ†é’Ÿï¼‰

```bash
python experiments/run_td3_arrival_rate_sweep.py --episodes 50
```

### 2. æ ‡å‡†å®éªŒï¼ˆçº¦1-2å°æ—¶ï¼‰

```bash
python experiments/run_td3_arrival_rate_sweep.py --episodes 200
```

### 3. å®Œæ•´å®éªŒï¼ˆçº¦3-4å°æ—¶ï¼Œè®ºæ–‡ç”¨ï¼‰

```bash
python experiments/run_td3_arrival_rate_sweep.py --episodes 800
```

## ğŸ”§ è‡ªå®šä¹‰å‚æ•°

### è‡ªå®šä¹‰åˆ°è¾¾ç‡èŒƒå›´

```bash
# æµ‹è¯•ä½è´Ÿè½½åœºæ™¯
python experiments/run_td3_arrival_rate_sweep.py --rates 0.5 1.0 1.5 2.0 --episodes 200

# æµ‹è¯•é«˜è´Ÿè½½åœºæ™¯
python experiments/run_td3_arrival_rate_sweep.py --rates 2.5 3.0 3.5 4.0 --episodes 200

# ç²¾ç»†åŒ–æµ‹è¯•
python experiments/run_td3_arrival_rate_sweep.py --rates 1.0 1.2 1.5 1.8 2.0 2.2 2.5 2.8 3.0 --episodes 200
```

### æŒ‡å®šè½¦è¾†æ•°

```bash
# 8è½¦è¾†åœºæ™¯
python experiments/run_td3_arrival_rate_sweep.py --num-vehicles 8 --episodes 200

# 16è½¦è¾†åœºæ™¯
python experiments/run_td3_arrival_rate_sweep.py --num-vehicles 16 --episodes 800
```

### æŒ‡å®šéšæœºç§å­

```bash
# å¯é‡å¤å®éªŒ
python experiments/run_td3_arrival_rate_sweep.py --seed 42 --episodes 200

# å¤šç§å­å¯¹æ¯”
python experiments/run_td3_arrival_rate_sweep.py --seed 2025 --episodes 200
```

### è‡ªå®šä¹‰è¾“å‡ºç›®å½•

```bash
python experiments/run_td3_arrival_rate_sweep.py \
    --output-dir results/custom_arrival_rate \
    --episodes 200
```

## ğŸ“ˆ æŸ¥çœ‹ç»“æœ

### è·³è¿‡è®­ç»ƒï¼Œä»…ç”Ÿæˆå›¾è¡¨

å¦‚æœå·²ç»å®Œæˆè®­ç»ƒï¼Œåªæƒ³é‡æ–°ç”Ÿæˆå›¾è¡¨ï¼š

```bash
python experiments/run_td3_arrival_rate_sweep.py --skip-training
```

### ç»“æœæ–‡ä»¶è¯´æ˜

```
results/parameter_sensitivity/arrival_rate/
â”œâ”€â”€ arrival_rate_1.0_results.json          # å„ä¸ªåˆ°è¾¾ç‡çš„è¯¦ç»†ç»“æœ
â”œâ”€â”€ arrival_rate_1.5_results.json
â”œâ”€â”€ arrival_rate_2.0_results.json
â”œâ”€â”€ ...
â”œâ”€â”€ arrival_rate_comparison_YYYYMMDD_HHMMSS.png  # å¯¹æ¯”å›¾è¡¨
â””â”€â”€ arrival_rate_summary_YYYYMMDD_HHMMSS.json    # æ±‡æ€»æ•°æ®
```

### ç»“æœè§£è¯»

**å¯¹æ¯”å›¾è¡¨åŒ…å«4ä¸ªå­å›¾ï¼š**

1. **(a) å¹³å‡æ­¥å¥–åŠ± vs ä»»åŠ¡åˆ°è¾¾ç‡**
   - æ ¸å¿ƒä¼˜åŒ–ç›®æ ‡ï¼š`-(æ—¶å»¶ + èƒ½è€—)`
   - æ•°å€¼è¶Šé«˜è¶Šå¥½ï¼ˆè´Ÿå€¼è¶Šæ¥è¿‘0è¶Šå¥½ï¼‰
   - åæ˜ ç³»ç»Ÿæ•´ä½“æ€§èƒ½

2. **(b) å¹³å‡æ—¶å»¶ vs ä»»åŠ¡åˆ°è¾¾ç‡**
   - ç³»ç»Ÿå“åº”é€Ÿåº¦
   - åŒ…å«ä¼ è¾“æ—¶å»¶ + è®¡ç®—æ—¶å»¶
   - æ•°å€¼è¶Šä½è¶Šå¥½

3. **(c) å¹³å‡èƒ½è€— vs ä»»åŠ¡åˆ°è¾¾ç‡**
   - ç³»ç»Ÿæ€»èƒ½è€—
   - åŒ…å«ä¼ è¾“èƒ½è€— + è®¡ç®—èƒ½è€—
   - æ•°å€¼è¶Šä½è¶Šå¥½

4. **(d) ä¸¢å¼ƒä»»åŠ¡æ•° vs ä»»åŠ¡åˆ°è¾¾ç‡**
   - ç³»ç»Ÿè´Ÿè½½æ‰¿å—èƒ½åŠ›
   - æ•°å€¼è¶Šä½è¶Šå¥½
   - è¿‡é«˜è¡¨ç¤ºç³»ç»Ÿè¿‡è½½

## ğŸ“Š å®éªŒç¤ºä¾‹

### ç¤ºä¾‹1: å®Œæ•´å‚æ•°æ‰«æ

```bash
# æµ‹è¯•6ä¸ªåˆ°è¾¾ç‡æ°´å¹³
python experiments/run_td3_arrival_rate_sweep.py \
    --rates 1.0 1.5 2.0 2.5 3.0 3.5 \
    --episodes 800 \
    --num-vehicles 12 \
    --seed 42
```

**é¢„æœŸç»“æœï¼š**
- ä½åˆ°è¾¾ç‡(1.0-2.0)ï¼šå¥–åŠ±è¾ƒé«˜ï¼Œæ—¶å»¶å’Œèƒ½è€—è¾ƒä½
- ä¸­åˆ°è¾¾ç‡(2.0-2.5)ï¼šæ€§èƒ½å¹³è¡¡ç‚¹
- é«˜åˆ°è¾¾ç‡(2.5-3.5)ï¼šç³»ç»Ÿè´Ÿè½½å¢åŠ ï¼Œæ€§èƒ½ä¸‹é™

### ç¤ºä¾‹2: å¤šè½¦è¾†åœºæ™¯å¯¹æ¯”

```bash
# 8è½¦è¾† - ä½è´Ÿè½½
python experiments/run_td3_arrival_rate_sweep.py \
    --num-vehicles 8 \
    --rates 1.0 1.5 2.0 2.5 \
    --episodes 800 \
    --output-dir results/arrival_rate_8v

# 12è½¦è¾† - ä¸­è´Ÿè½½
python experiments/run_td3_arrival_rate_sweep.py \
    --num-vehicles 12 \
    --rates 1.0 1.5 2.0 2.5 3.0 3.5 \
    --episodes 800 \
    --output-dir results/arrival_rate_12v

# 16è½¦è¾† - é«˜è´Ÿè½½
python experiments/run_td3_arrival_rate_sweep.py \
    --num-vehicles 16 \
    --rates 1.5 2.0 2.5 3.0 3.5 4.0 \
    --episodes 800 \
    --output-dir results/arrival_rate_16v
```

## ğŸ”¬ è®ºæ–‡ç”¨å®éªŒå»ºè®®

### æ¨èé…ç½®

```bash
# æ ‡å‡†12è½¦è¾†åœºæ™¯ï¼ˆä¸»è¦ç»“æœï¼‰
python experiments/run_td3_arrival_rate_sweep.py \
    --rates 1.0 1.5 2.0 2.5 3.0 3.5 \
    --episodes 800 \
    --num-vehicles 12 \
    --seed 42 \
    --output-dir results/paper/arrival_rate_12v

# å¤šç§å­éªŒè¯ï¼ˆå¯é€‰ï¼‰
for seed in 42 2025 3407; do
    python experiments/run_td3_arrival_rate_sweep.py \
        --rates 1.0 1.5 2.0 2.5 3.0 3.5 \
        --episodes 800 \
        --num-vehicles 12 \
        --seed $seed \
        --output-dir results/paper/arrival_rate_seed_${seed}
done
```

### å›¾è¡¨è´¨é‡

ç”Ÿæˆçš„PNGå›¾è¡¨åˆ†è¾¨ç‡ä¸º300 DPIï¼Œå¯ç›´æ¥ç”¨äºè®ºæ–‡æŠ•ç¨¿ã€‚

## âš™ï¸ æŠ€æœ¯ç»†èŠ‚

### ç¯å¢ƒå˜é‡ä¼ é€’

è„šæœ¬é€šè¿‡ç¯å¢ƒå˜é‡ `TASK_ARRIVAL_RATE` å‘ `train_single_agent.py` ä¼ é€’å‚æ•°ï¼š

```python
env['TASK_ARRIVAL_RATE'] = str(arrival_rate)
```

### æŒ‡æ ‡æå–

- ä½¿ç”¨æœ€å50è½®çš„å¹³å‡å€¼ä½œä¸ºç¨³å®šæœŸæ€§èƒ½
- åŒ…å«æ ‡å‡†å·®ç”¨äºè¯„ä¼°ç¨³å®šæ€§
- å®Œæ•´å†å²æ•°æ®ä¿å­˜ç”¨äºè¯¦ç»†åˆ†æ

### æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨ `--silent-mode` å‡å°‘è¾“å‡º
- è‡ªåŠ¨ç®¡ç†æ–‡ä»¶è·¯å¾„
- æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼ˆ`--skip-training`ï¼‰

## ğŸ› å¸¸è§é—®é¢˜

### Q1: è®­ç»ƒæ—¶é—´å¤ªé•¿æ€ä¹ˆåŠï¼Ÿ

**A:** å‡å°‘è½®æ¬¡æˆ–åˆ°è¾¾ç‡æµ‹è¯•ç‚¹ï¼š
```bash
# å¿«é€Ÿæµ‹è¯•ï¼šåªæµ‹è¯•3ä¸ªç‚¹ï¼Œ50è½®
python experiments/run_td3_arrival_rate_sweep.py \
    --rates 1.5 2.5 3.5 \
    --episodes 50
```

### Q2: å¦‚ä½•åªé‡æ–°ç”Ÿæˆå›¾è¡¨ï¼Ÿ

**A:** ä½¿ç”¨ `--skip-training` å‚æ•°ï¼š
```bash
python experiments/run_td3_arrival_rate_sweep.py --skip-training
```

### Q3: å¦‚ä½•æ¯”è¾ƒä¸åŒè½¦è¾†æ•°çš„ç»“æœï¼Ÿ

**A:** ä½¿ç”¨ä¸åŒçš„è¾“å‡ºç›®å½•ï¼Œç„¶åæ‰‹åŠ¨æ¯”è¾ƒï¼š
```bash
# è¿è¡Œä¸åŒè½¦è¾†æ•°çš„å®éªŒ
python experiments/run_td3_arrival_rate_sweep.py --num-vehicles 8 --output-dir results/arr_8v --episodes 200
python experiments/run_td3_arrival_rate_sweep.py --num-vehicles 12 --output-dir results/arr_12v --episodes 200
python experiments/run_td3_arrival_rate_sweep.py --num-vehicles 16 --output-dir results/arr_16v --episodes 200

# æŸ¥çœ‹å„è‡ªçš„ç»“æœå›¾è¡¨
```

### Q4: è®­ç»ƒä¸­æ–­äº†æ€ä¹ˆåŠï¼Ÿ

**A:** å·²å®Œæˆçš„åˆ°è¾¾ç‡ç»“æœä¼šä¿å­˜ï¼Œå¯ä»¥æ‰‹åŠ¨ä¿®æ”¹ `--rates` å‚æ•°åªè¿è¡Œæœªå®Œæˆçš„ï¼š
```bash
# å‡è®¾1.0, 1.5å·²å®Œæˆï¼Œåªè¿è¡Œå‰©ä½™çš„
python experiments/run_td3_arrival_rate_sweep.py \
    --rates 2.0 2.5 3.0 3.5 \
    --episodes 800
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [train_single_agent.py](../train_single_agent.py) - TD3è®­ç»ƒè„šæœ¬
- [config/system_config.py](../config/system_config.py) - ç³»ç»Ÿé…ç½®
- [paper_ending.tex](../docs/paper_ending.tex) - ç†è®ºæ¨¡å‹

## ğŸ“ å¼•ç”¨è¯´æ˜

å¦‚æœåœ¨è®ºæ–‡ä¸­ä½¿ç”¨è¯¥å®éªŒç»“æœï¼Œå»ºè®®æè¿°ï¼š

```latex
æˆ‘ä»¬æµ‹è¯•äº†ä»»åŠ¡åˆ°è¾¾ç‡ä»1.0åˆ°3.5 tasks/så¯¹TD3ç®—æ³•æ€§èƒ½çš„å½±å“ã€‚
åœ¨12è½¦è¾†åœºæ™¯ä¸‹ï¼Œæ¯ä¸ªåˆ°è¾¾ç‡é…ç½®è®­ç»ƒ800è½®ã€‚
å®éªŒç»“æœè¡¨æ˜ï¼Œå½“åˆ°è¾¾ç‡åœ¨1.5-2.5 tasks/sèŒƒå›´å†…æ—¶ï¼Œ
ç³»ç»Ÿèƒ½å¤Ÿåœ¨æ—¶å»¶å’Œèƒ½è€—ä¹‹é—´å®ç°è‰¯å¥½çš„å¹³è¡¡ã€‚
```

## â±ï¸ é¢„è®¡è¿è¡Œæ—¶é—´

| é…ç½® | è½®æ¬¡ | åˆ°è¾¾ç‡ç‚¹æ•° | é¢„è®¡æ—¶é—´ |
|------|------|-----------|---------|
| å¿«é€Ÿæµ‹è¯• | 50 | 6 | ~10åˆ†é’Ÿ |
| æ ‡å‡†å®éªŒ | 200 | 6 | ~1-2å°æ—¶ |
| å®Œæ•´å®éªŒ | 800 | 6 | ~3-4å°æ—¶ |
| ç²¾ç»†å®éªŒ | 800 | 10 | ~5-6å°æ—¶ |

*æ³¨ï¼šå®é™…æ—¶é—´å–å†³äºç¡¬ä»¶æ€§èƒ½*

## ğŸ‰ ç¤ºä¾‹è¾“å‡º

```
================================================================================
ğŸ”¬ TD3ä»»åŠ¡åˆ°è¾¾ç‡æ•æ„Ÿæ€§åˆ†æå®éªŒ
================================================================================
ğŸ“‹ å®éªŒé…ç½®:
   - ç®—æ³•: TD3
   - åˆ°è¾¾ç‡èŒƒå›´: [1.0, 1.5, 2.0, 2.5, 3.0, 3.5] tasks/s
   - è®­ç»ƒè½®æ¬¡: 200
   - è½¦è¾†æ•°: 12
   - éšæœºç§å­: 42
   - è¾“å‡ºç›®å½•: results/parameter_sensitivity/arrival_rate
================================================================================

================================================================================
ğŸš€ å¼€å§‹è®­ç»ƒ: arrival_rate=1.0 tasks/s
================================================================================
...
âœ… è®­ç»ƒå®Œæˆ: arrival_rate=1.0
ğŸ’¾ ç»“æœå·²ä¿å­˜: results/parameter_sensitivity/arrival_rate/arrival_rate_1.0_results.json
...

================================================================================
ğŸ“Š å®éªŒç»“æœæ±‡æ€»
================================================================================
    åˆ°è¾¾ç‡ |   å¹³å‡æ­¥å¥–åŠ± |   å¹³å‡æ—¶å»¶ |   å¹³å‡èƒ½è€— |     ä¸¢å¼ƒä»»åŠ¡
--------------------------------------------------------------------------------
       1.0 |     -0.2345 |     0.1234 |     0.0987 |       0.12
       1.5 |     -0.2876 |     0.1456 |     0.1123 |       0.45
       2.0 |     -0.3421 |     0.1789 |     0.1345 |       1.23
       2.5 |     -0.4123 |     0.2134 |     0.1567 |       2.45
       3.0 |     -0.5234 |     0.2567 |     0.1789 |       4.56
       3.5 |     -0.6345 |     0.3012 |     0.2012 |       7.89
================================================================================

ğŸ“Š å¯¹æ¯”å›¾è¡¨å·²ä¿å­˜: results/parameter_sensitivity/arrival_rate/arrival_rate_comparison_20251031_123456.png
ğŸ’¾ æ±‡æ€»æŠ¥å‘Šå·²ä¿å­˜: results/parameter_sensitivity/arrival_rate/arrival_rate_summary_20251031_123456.json

================================================================================
âœ… å®éªŒå®Œæˆ!
================================================================================
ğŸ“ ç»“æœç›®å½•: results/parameter_sensitivity/arrival_rate
ğŸ“Š å…±å®Œæˆ 6 ä¸ªå®éªŒ
================================================================================
```

